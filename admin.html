<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Panel - JNK Express</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Roboto', sans-serif; background: #fff3f3; padding: 20px; max-width: 800px; margin: auto; }
    h2 { color: #D7282F; }
    input, select, button {
      width: 100%; padding: 12px; margin-top: 10px;
      font-size: 1em; border-radius: 6px; border: 1px solid #ccc;
    }
    button { background-color: #D7282F; color: white; border: none; margin-bottom: 20px; cursor: pointer; }
    .item {
      background: #fff; padding: 10px; margin: 10px 0;
      border-left: 5px solid #D7282F; border-radius: 4px;
      display: flex; justify-content: space-between; align-items: flex-start;
    }
    .item-content { width: 100%; }
    .delete-btn {
      background: #aaa; color: white; border: none;
      padding: 6px 10px; border-radius: 4px; cursor: pointer; margin-left: 10px;
    }
    .pagination { display: flex; justify-content: center; gap: 10px; margin-top: 20px; }
    .timeline { margin-top: 5px; padding-left: 10px; font-size: 0.95em; color: #333; }
    .top-bar { display: flex; gap: 10px; flex-wrap: wrap; }
  </style>
</head>
<body>
  <h2>JNK Admin Panel</h2>
  <input type="text" id="username" placeholder="Username" />
  <input type="password" id="password" placeholder="Password" />
  <button onclick="login()">Login</button>
  <p id="loginMessage" style="color:red;"></p>

  <div id="adminSection" style="display:none;">
    <input type="text" id="trackNumber" placeholder="Tracking Number" />
    <button onclick="startScanner()">üì∑ Scan</button>
    <div id="scannerContainer" style="display:none">
      <div id="scanner" style="width:100%"></div>
      <button onclick="stopScanner()">‚ùå Cancel</button>
    </div>

    <select id="trackStatus">
      <option value="">Select Status</option>
      <option>Package Received</option>
      <option>In Transit</option>
      <option>Arrived</option>
      <option>For Pick-up</option>
    </select>
    <input type="text" id="trackLocation" placeholder="Location (e.g., Manila Hub)" />
    <input type="date" id="estimatedDate" />
    <button onclick="saveTracking()">Add / Update</button>

    <div class="top-bar">
      <input type="text" id="searchInput" placeholder="Search tracking number..." oninput="renderEntries()" />
      <select id="filterDate" onchange="renderEntries()">
        <option value="">All Dates</option>
        <option value="today">Today</option>
        <option value="week">This Week</option>
      </select>
    </div>

    <div class="top-bar">
      <input type="date" id="bulkDate" />
      <input type="time" id="startTime" />
      <input type="time" id="endTime" />
      <select id="bulkStatus">
        <option value="">Update Status to...</option>
        <option>Package Received</option>
        <option>In Transit</option>
        <option>Arrived</option>
        <option>For Pick-up</option>
      </select>
      <input type="text" id="bulkLocation" placeholder="Optional New Location" />
      <button onclick="bulkUpdateByTimeRange()">Apply Bulk Update</button>
    </div>

    <div class="top-bar">
      <input type="date" id="exportFrom" />
      <input type="date" id="exportTo" />
      <button onclick="exportCSVByDateRange()">Export CSV by Date</button>
    </div>

    <h3>All Tracking Entries</h3>
    <div id="entries"></div>
    <div class="pagination">
      <button onclick="prevPage()">Previous</button>
      <button onclick="nextPage()">Next</button>
    </div>
  </div>

<script>
// Firebase and logic scripts here (same as previous script setup)
// Add functions: login, loadAllEntries, renderEntries, saveTracking, deleteEntry,
// nextPage, prevPage, exportToCSV, exportCSVByDateRange, bulkUpdateByTimeRange
</script>
</body>
</html>
